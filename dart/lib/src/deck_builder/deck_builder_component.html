<div class="deck-builder-container">
  <nav class="toolbar">
    <a class="back" [routerLink]="Routes.menu.toUrl()" [routerLinkActive]="'active'"><i class=" material-icons md-48">arrow_back</i></a>
    <input type="text" class="code-box" [(ngModel)]="codeBox" />
    <div class="tools">
      <a (click)="(importCode)"><i class="material-icons md-48">archive</i></a>
      <a (click)="(exportCode)"><i class="material-icons md-48">unarchive</i></a>
      <a (click)="(clearDeck)"><i class="material-icons md-48">delete</i></a>
      <a (click)="(generatePdf)"><i class="material-icons md-48">get_app</i></a>
    </div>
  </nav>
  <div class="library">
    <div class="library-elements">
      <a class="element-icon" [class.disabled]="selectedElement != 'spirit' && selectedElement != null" (click)="libraryElement('spirit')"><img src="{{ AssetService.spiritImage }}"/></a>
      <a class="element-icon" [class.disabled]="selectedElement != 'fire' && selectedElement != null" (click)="libraryElement('fire')"><img src="{{ AssetService.fireImage }}"/></a>
      <a class="element-icon" [class.disabled]="selectedElement != 'air' && selectedElement != null" (click)="libraryElement('air')"><img src="{{ AssetService.airImage }}"/></a>
      <a class="element-icon" [class.disabled]="selectedElement != 'earth' && selectedElement != null" (click)="libraryElement('earth')"><img src="{{ AssetService.earthImage }}"/></a>
      <a class="element-icon" [class.disabled]="selectedElement != 'water' && selectedElement != null" (click)="libraryElement('water')"><img src="{{ AssetService.waterImage }}"/></a>
    </div>
    <div class="library-toolbar">
      <input type="text" class="search" [(ngModel)]="searchBox" (keyup)="filterLibrary()" />
      <i class="material-icons md-48 search-icon">search</i>
    </div>
    <div class="library-card-list">
      <div class="library-card" *ngFor="let card of libraryCards" (click)="onAdd(card)" (contextmenu)="onSelect(card, $event)">
        <span class="cost">{{ card.totalCost }}</span>
        <img class="element" src="{{ card.elementImage }}" />
        <span class="name">{{ card.name }}</span>
        <img class="image" src="{{ card.image }}" />
      </div>
    </div>
  </div>
  <div class="viewer">
    <div class="viewer-card" *ngIf="selected != null">
      <div class="name">
        {{ selected.name }}
      </div>
      <div class="element">
        <img src="{{ selected.elementImage }}" />
      </div>
      <div class="picture">
        <img src="{{ selected.image }}" />
      </div>
      <div class="type">
        {{ selected.typeLine }}
      </div>
      <div class="text">
        {{ selected.text }}
      </div>
      <div class="cost">
        <div *ngFor="let element of selected.cost.keys" class="cost-element">
          <span *ngIf="selected.cost[element] > 1">{{ selected.cost[element] }}</span>
          <img src="{{ AssetService.elementImages[element] }}" />
        </div>
      </div>
      <div class="stats">
        {{ selected.statsLine }}
      </div>
    </div>
    <span class="viewer-message" *ngIf="selected == null">
      Right-click a card to view
    </span>
  </div>
  <div class="deck">
    <div class="deck-header">
      <span class="deck-counter" [class.invalid]="!deckValid">{{ deckSize }} / 30</span>
      <span class="print-counter">{{ deckSize }} / {{ nextMultiple(deckSize) }}</span>
    </div>
    <div class="deck-border"></div>
    <div class="deck-card-list">
      <div class="deck-card" *ngFor="let card of deckCards.keys" (click)="onRemove(card)" (contextmenu)="onSelect(card, $event)">
        <span class="cost">{{ card.totalCost }}</span>
        <img class="element" src="{{ card.elementImage }}" />
        <span class="name">{{ card.name }}</span>
        <span class="number" *ngIf="deckCards[card] > 1" [class.invalid]="deckCards[card] > 2">x{{ deckCards[card] }}</span>
      </div>
    </div>
  </div>
</div>
